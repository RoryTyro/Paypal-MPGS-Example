<head>
  <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Ensures optimal rendering on mobile devices. -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge" /> <!-- Optimal Internet Explorer compatibility -->
</head>

<body>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script
    src="https://www.paypal.com/sdk/js?client-id=sb"> // Required. Replace SB_CLIENT_ID with your sandbox client ID.
  </script>
  <script>

$.post( "http://127.0.0.1:3000/create-paypal-transaction", function() {
  alert( "success" );
})
  .done(function() {
    alert( "second success" );
    document.location.href = 'http://127.0.0.1:3000/redirect-paypal-transaction'
  })
  .fail(function() {
    alert( "error" );
  })
  .always(function() {
    alert( "finished" );
  });


  


 /*
 fetch('/create-paypal-transaction', {
      method: 'post',
      redirect: 'follow',
      mode: 'cors',
      headers: {
        'content-type': 'application/json',
        'Access-Control-Allow-Origin': '*'
      }
    })
    .then(response => {
        // HTTP 301 response
        if (response.redirected) {
            window.location.href = response;
        }
    })
    .catch(function(err) {
        //console.info(err + " url: " + url);
    });
*/

  </script>
</body>